<ui:composition template="./cemeteryTemplate.xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets">
  <ui:define name="content">
    <f:metadata>
      <f:viewParam name="cemeteryId" value="#{cemeteryImagesPageBean.cemeteryId}"/>
    </f:metadata>
    <h:inputFile id="file" value="#{cemeteryImagesPageBean.file}"/>
    <h:commandButton value="Upload" action="#{cemeteryImagesPageBean.upload}">
      <f:param name="cemeteryId" value="#{cemeteryImagesPageBean.cemeteryId}" />
    </h:commandButton>
    <ul>
      <ui:repeat value="#{cemeteryImagesPageBean.thumbnails}" var="thumbnail">
        <h:commandLink action="#{cemeteryImagesPageBean.show}">
          <f:param name="cemeteryId" value="#{cemeteryImagesPageBean.cemeteryId}" />
          <f:param name="imageId" value="#{thumbnail.id}" />
          <h:graphicImage value="#{thumbnail.thumbnailImageUrl}" />
          <h:commandLink action="#{cemeteryImagesPageBean.makeDefault}" value="#{messages['cemetery.images.make.default.image']}">
            <f:param name="cemeteryId" value="#{cemeteryImagesPageBean.cemeteryId}" />
          </h:commandLink>
        </h:commandLink>
      </ui:repeat>
    </ul>
  </ui:define>
</ui:composition>